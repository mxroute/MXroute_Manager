define(["angular","app/controllers/ROUTES","cjt/directives/breadcrumbs","cjt/services/alertService"],function(angular,ROUTES){"use strict";var MODULE_NAMESPACE="cpanel.emailDeliverability.controllers.route";var MODULE_REQUIREMENTS=[];var CONTROLLER_NAME="RouteController";var CONTROLLER_INJECTABLES=["$scope","$rootScope","$location","alertService"];var CONTROLLER=function RouteController($scope,$rootScope,$location,$alertService){function _getRouteByPath(path){var foundRoute;$scope.routes.forEach(function(route,key){if(route.route===path){foundRoute=key}});return foundRoute}function _getTabByID(id){var parentTab;$scope.routes.forEach(function(route){if(route.id===id){parentTab=route}});return parentTab}function _init(){$rootScope.$on("$routeChangeStart",function(){$scope.loading=true;$alertService.clear("danger")});$rootScope.$on("$routeChangeSuccess",function(event,current){$scope.loading=false;$scope.parentTab=null;if(current){var currentRouteKey=_getRouteByPath(current.$$route.originalPath);$scope.currentTab=$scope.routes[currentRouteKey];$scope.activeTab=currentRouteKey;if($scope.currentTab){$scope.parentTab=_getTabByID($scope.currentTab.parentRoute)}}});$rootScope.$on("$routeChangeError",function(){$scope.loading=false})}angular.extend($scope,{activeTab:0,currentTab:null,routes:ROUTES});_init()};CONTROLLER_INJECTABLES.push(CONTROLLER);var app=angular.module(MODULE_NAMESPACE,MODULE_REQUIREMENTS);app.controller(CONTROLLER_NAME,CONTROLLER_INJECTABLES);return{"class":CONTROLLER,namespace:MODULE_NAMESPACE}});