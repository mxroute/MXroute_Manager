define("app/services/emailAccountsService",["angular","lodash","cjt/util/locale","cjt/util/parse","cjt/io/uapi-request","cjt/io/batch-request","cjt/io/api","cjt/io/uapi","cjt/services/APIService"],function(e,t,s,i,a,n){"use strict";var o="&infin;",r="Main Account",l=e.module("cpanel.emailAccounts.service",["cjt2.services.api"]);l.value("PAGE",PAGE),l.factory("emailAccountsService",["$q","APIService","$timeout","PAGE",function(l,c,u,d){function h(e){return e>=80?"danger":e>=60?"warning":60>e?"success":"success"}function p(e){return e.diskused=parseInt(e.diskused,10),e.humandiskused=s.format_bytes(e._diskused),e.id=e.email,0===e._diskquota||0===e.diskquota||"unlimited"===e.diskquota?(e.diskquota=0,e.humandiskquota=o,e.diskusedpercent=0,e.quotaType="unlimited",e.quota="",e.displayProgressbar=!1):(e.diskquota=parseInt(e._diskquota,10)/1024/1024,e.humandiskquota=s.format_bytes(e._diskquota),e.diskusedpercent=(e._diskused/e._diskquota*100).toFixed(2),e.quotaProgressType=h(e.diskusedpercent),e.quotaType="userdefined",e.quota=e.diskquota,e.quotaUnit="MB",e.displayProgressbar=!0),e.humandiskusedpercent=s.numf(e.diskusedpercent)+"%",e.suspended_login=i.parsePerlBoolean(e.suspended_login),e.suspended_incoming=i.parsePerlBoolean(e.suspended_incoming),e.suspended_outgoing=i.parsePerlBoolean(e.suspended_outgoing),e.hold_outgoing=i.parsePerlBoolean(e.hold_outgoing),e.has_suspended=i.parsePerlBoolean(e.has_suspended),e.isDefault=e.login===r,e.webmailLink="../mail/webmailform.html?user="+window.encodeURIComponent(e.email)+"&amp;domain="+window.encodeURIComponent(e.domain),e}var _=new c({transformAPISuccess:function(e){return e.data}}),m=function(){};m.prototype=_;var f;return e.extend(m.prototype,{getStoredValue:function(e){var t=localStorage.getItem(e);return t=t&&0===t.indexOf(d.securityToken+":")?t.substr(1+d.securityToken.length):""},_dataWrapper:function(e){return this.deferred(e).promise},getUpgradeUrl:function(){return d.upgradeUrl},getEmailStats:function(){if(f)return l.resolve(f);var e=new a.Class;return e.initialize("ResourceUsage","get_usages"),e.addFilter("id","contains","email_accounts"),this.deferred(e).promise.then(function(e){f={};var t;return e&&e.length?(t=e[0],f.maximum=parseInt(t.maximum,10),f.used=parseInt(t.usage,10),f.available=!isNaN(f.maximum)&&f.maximum?f.maximum-f.used:-1,f):l.reject()})},getMailDomains:function(){var e=new a.Class;return e.initialize("Email","list_mail_domains"),this.deferred(e).promise.then(function(e){var s=t.map(e,t.property("domain"));return s})},createEmail:function(e){var t=new a.Class;if(e.setPassword){var s={email:e.userName,domain:e.domain,password:e.password,quota:e.quota,send_welcome_email:e.sendWelcomeEmail?1:0};t.initialize("Email","add_pop",s)}else{var i={username:e.userName,domain:e.domain,alternate_email:e.recoveryEmail,send_invite:1,"services.email.enabled":1,"services.email.quota":e.quota};t.initialize("UserManager","create_user",i)}return this.deferred(t).promise.then(function(e){return f.used=f.used+1,-1!==f.available&&(f.available=f.available-1),e})},getDefaultAccountUsage:function(){var e=new a.Class;return e.initialize("Email","get_main_account_disk_usage"),this._dataWrapper(e)},isSharedAddressBookEnabled:function(){var e=new a.Class;return e.initialize("DAV","has_shared_global_addressbook"),this._dataWrapper(e)},enableSharedAddressBook:function(){var e=new a.Class;return e.initialize("DAV","enable_shared_global_addressbook"),this._dataWrapper(e)},disableSharedAddressBook:function(){var e=new a.Class;return e.initialize("DAV","disable_shared_global_addressbook"),this._dataWrapper(e)},isUTF8MailboxNamesEnabled:function(){var e=new a.Class;return e.initialize("Mailboxes","has_utf8_mailbox_names"),this._dataWrapper(e)},enableUTF8MailboxNames:function(){var e=new a.Class;return e.initialize("Mailboxes","set_utf8_mailbox_names"),e.addArgument("enabled",1),this._dataWrapper(e)},disableUTF8MailboxNames:function(){var e=new a.Class;return e.initialize("Mailboxes","set_utf8_mailbox_names"),e.addArgument("enabled",0),this._dataWrapper(e)},getEmailAccountDetails:function(e){if(e){var i=new a.Class;return i.initialize("Email","list_pops_with_disk"),i.addFilter("email","eq",e),i.addArgument("no_human_readable_keys",1),i.addArgument("get_restrictions",1),this._dataWrapper(i).then(function(i){return t.isArray(i)&&0===i.length?l.reject(s.maketext("You do not have an email account named “[_1]”.",t.escape(e))):p(i[0])},function(e){return e})}},deleteEmail:function(e){if(e){var t=new a.Class;return t.initialize("Email","delete_pop",{email:e}),this.deferred(t).promise.then(function(e){return f.used=f.used-1,-1!==f.available&&(f.available=f.available+1),e})}},deleteEmails:function(e){if(e&&e.length>0){for(var t=[],s=0,i=e.length;i>s;s++){var o=new a.Class;o.initialize("Email","delete_pop",{email:e[s].email}),t.push(o)}var r=new n.Class(t);return this.deferred(r).promise.then(function(t){return f.used=f.used-e.length,-1!==f.available&&(f.available=f.available+e.length),t})}},_createAPICall:function(e,t,i){var n=new a.Class;return n.initialize("Email",e,t),this._dataWrapper(n).then(function(){return i.success?{method:e,type:"success",message:s.makevar(i.success,t.fullEmail),autoClose:1e4}:{method:e,type:"success"}},function(a){return i.error?{method:e,type:"danger",message:s.makevar(i.error,t.fullEmail,a)}:{method:e,type:"danger"}})},getHeldMessageCount:function(e){var t=new a.Class;return t.initialize("Email","get_held_message_count",{email:e}),this._dataWrapper(t)},deleteHeldMessages:function(e,t){var s=new a.Class;return s.initialize("Email","delete_held_messages",{email:e,release_after_delete:t?1:0}),this._dataWrapper(s)},_handleSuspensions:function(e,t,i){var a=[];return i.incoming!==t.incoming&&a.push(i.incoming?this._createAPICall("suspend_incoming",{email:e.email,fullEmail:e.email},{success:s.translatable("You suspended incoming mail for “[_1]”."),error:s.translatable("We can’t suspend incoming mail for “[_1]”:“[_2]”")}):this._createAPICall("unsuspend_incoming",{email:e.email,fullEmail:e.email},{success:s.translatable("You unsuspended incoming mail for “[_1]”."),error:s.translatable("We can’t unsuspend incoming mail for “[_1]”:“[_2]”")})),i.login!==t.login&&a.push(i.login?this._createAPICall("suspend_login",{email:e.email,fullEmail:e.email},{success:s.translatable("You suspended logins for “[_1]”."),error:s.translatable("We can’t suspend logins for “[_1]”:“[_2]”")}):this._createAPICall("unsuspend_login",{email:e.email,fullEmail:e.email},{success:s.translatable("You unsuspended logins for “[_1]”."),error:s.translatable("We can’t unsuspend logins for “[_1]”:“[_2]”")})),i.outgoing!==t.outgoing&&("hold"===i.outgoing?a.push(this._createAPICall("hold_outgoing",{email:e.email,fullEmail:e.email},{success:s.translatable("We’re holding outgoing mail for “[_1]”."),error:s.translatable("We can’t hold mail for “[_1]”:“[_2]”")})):"suspend"===i.outgoing&&a.push(this._createAPICall("suspend_outgoing",{email:e.email,fullEmail:e.email},{success:s.translatable("You suspended outgoing mail for “[_1]”."),error:s.translatable("We can’t suspend outgoing mail for “[_1]”:“[_2]”")})),"suspend"===t.outgoing&&a.push(this._createAPICall("unsuspend_outgoing",{email:e.email,fullEmail:e.email},{success:s.translatable("You unsuspended outgoing mail for “[_1]”."),error:s.translatable("We can’t unsuspend outgoing mail for “[_1]”:“[_2]”")})),"hold"===t.outgoing&&a.push(this._createAPICall("release_outgoing",{email:e.email,fullEmail:e.email},{success:s.translatable("You unsuspended outgoing mail for “[_1]”."),error:s.translatable("We can’t unsuspend outgoing mail for “[_1]”:“[_2]”")}))),a},updateEmail:function(e,t,i,a){var n=[];if(e&&t){if("undefined"!=typeof t.password&&t.password&&n.push(this._createAPICall("passwd_pop",{email:t.email,password:t.password,domain:t.domain,fullEmail:t.email},{success:s.translatable("You updated the password for “[_1]”."),error:s.translatable("We can’t update the password for “[_1]”:“[_2]”")})),Number(e.diskquota).toFixed(2)!==t.quota.toFixed(2)&&n.push(this._createAPICall("edit_pop_quota",{email:t.user,domain:t.domain,quota:t.quota,fullEmail:t.email},{success:s.translatable("You updated the storage space for “[_1]”."),error:s.translatable("We can’t update the storage space for “[_1]”:“[_2]”")})),a&&i){if(a.deleteHeldMessages){var o="hold"===i.outgoing&&"allow"===a.outgoing,r=this;return this.deleteHeldMessages(t.email,o).then(function(e){o&&(a.outgoing="hold");var c=r._handleSuspensions(t,i,a),d=n.concat(c);return d.length>0?l.all(d):u(function(){return l.resolve([{type:"success",method:"delete_held_messages",message:s.maketext("[quant,_1,message has,messages have] been queued for deletion from the outgoing mail queue.",e)}])},0)},function(e){return u(function(){return l.resolve([{type:"danger",message:e}])},0)})}var c=this._handleSuspensions(t,i,a);n=n.concat(c)}return n.length>0?l.all(n):u(function(){return l.resolve([{type:"success",message:s.maketext("Email account “[_1]” is up to date.",t.email),autoClose:1e4}])},0)}},getEmailAccounts:function(e){this.currentGetRequest&&this.currentGetRequest.jqXHR&&this.currentGetRequest.jqXHR.abort();var t=new a.Class;e||(e={}),e.no_human_readable_keys=1,e.get_restrictions=1,e.include_main=1,t.initialize("Email","list_pops_with_disk",e);var s=l.defer(),i=this;return this.currentGetRequest=new c.AngularAPICall(t,{done:function(e){if(i.currentGetRequest=void 0,e.parsedResponse.error)s.reject(e.parsedResponse.error);else{for(var t=e.parsedResponse,a=t.data,n=a.length,o=0;n>o;o++)p(a[o]);s.resolve(t)}},fail:function(){i.currentGetRequest=void 0}}),s.promise}}),new m}])}),function(e){define("jquery-chosen",["jquery"],function(){return function(){(function(){var e,t,s,i,a,n={}.hasOwnProperty,o=function(e,t){function s(){this.constructor=e}for(var i in t)n.call(t,i)&&(e[i]=t[i]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};i=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,s,i,a,n,o;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),title:e.title?e.title:void 0,children:0,disabled:e.disabled,classes:e.className}),n=e.childNodes,o=[],i=0,a=n.length;a>i;i++)s=n[i],o.push(this.add_option(s,t,e.disabled));return o},e.prototype.add_option=function(e,t,s){return"OPTION"===e.nodeName.toUpperCase()?(""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,title:e.title?e.title:void 0,selected:e.selected,disabled:s===!0?s:e.disabled,group_array_index:t,group_label:null!=t?this.parsed[t].label:null,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},e.prototype.escapeExpression=function(e){var t,s;return null==e||e===!1?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(s,function(e){return t[e]||"&amp;"})):e},e}(),i.select_to_array=function(e){var t,s,a,n,o;for(s=new i,o=e.childNodes,a=0,n=o.length;n>a;a++)t=o[a],s.add_node(t);return s.parsed},t=function(){function e(t,s){this.form_field=t,this.options=null!=s?s:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers(),this.on_ready())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0,this.include_group_label_in_selected=this.options.include_group_label_in_selected||!1,this.max_shown_results=this.options.max_shown_results||Number.POSITIVE_INFINITY},e.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.choice_label=function(e){return this.include_group_label_in_selected&&null!=e.group_label?"<b class='group-name'>"+e.group_label+"</b>"+e.html:e.html},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(){var e=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return e.blur_test()},100))},e.prototype.results_option_build=function(e){var t,s,i,a,n,o,r;for(t="",a=0,r=this.results_data,n=0,o=r.length;o>n&&(s=r[n],i="",i=s.group?this.result_add_group(s):this.result_add_option(s),""!==i&&(a++,t+=i),(null!=e?e.first:void 0)&&(s.selected&&this.is_multiple?this.choice_build(s):s.selected&&!this.is_multiple&&this.single_set_selected_text(this.choice_label(s))),!(a>=this.max_shown_results));n++);return t},e.prototype.result_add_option=function(e){var t,s;return e.search_match&&this.include_option_in_results(e)?(t=[],e.disabled||e.selected&&this.is_multiple||t.push("active-result"),!e.disabled||e.selected&&this.is_multiple||t.push("disabled-result"),e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),s=document.createElement("li"),s.className=t.join(" "),s.style.cssText=e.style,s.setAttribute("data-option-array-index",e.array_index),s.innerHTML=e.search_text,e.title&&(s.title=e.title),this.outerHTML(s)):""},e.prototype.result_add_group=function(e){var t,s;return(e.search_match||e.group_match)&&e.active_options>0?(t=[],t.push("group-result"),e.classes&&t.push(e.classes),s=document.createElement("li"),s.className=t.join(" "),s.innerHTML=e.search_text,e.title&&(s.title=e.title),this.outerHTML(s)):""},e.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},e.prototype.reset_single_select_options=function(){var e,t,s,i,a;for(i=this.results_data,a=[],t=0,s=i.length;s>t;t++)e=i[t],a.push(e.selected?e.selected=!1:void 0);return a},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,s,i,a,n,o,r,l,c,u,d;for(this.no_results_clear(),i=0,n=this.get_search_text(),e=n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),l=new RegExp(e,"i"),s=this.get_search_regex(e),d=this.results_data,c=0,u=d.length;u>c;c++)t=d[c],t.search_match=!1,a=null,this.include_option_in_results(t)&&(t.group&&(t.group_match=!1,t.active_options=0),null!=t.group_array_index&&this.results_data[t.group_array_index]&&(a=this.results_data[t.group_array_index],0===a.active_options&&a.search_match&&(i+=1),a.active_options+=1),t.search_text=t.group?t.label:t.html,(!t.group||this.group_search)&&(t.search_match=this.search_string_match(t.search_text,s),t.search_match&&!t.group&&(i+=1),t.search_match?(n.length&&(o=t.search_text.search(l),r=t.search_text.substr(0,o+n.length)+"</em>"+t.search_text.substr(o+n.length),t.search_text=r.substr(0,o)+"<em>"+r.substr(o)),null!=a&&(a.group_match=!0)):null!=t.group_array_index&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)));return this.result_clear_highlight(),1>i&&n.length?(this.update_results_content(""),this.no_results(n)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.get_search_regex=function(e){var t;return t=this.search_contains?"":"^",new RegExp(t+e,"i")},e.prototype.search_string_match=function(e,t){var s,i,a,n;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||0===e.indexOf("["))&&(i=e.replace(/\[|\]/g,"").split(" "),i.length))for(a=0,n=i.length;n>a;a++)if(s=i[a],t.test(s))return!0},e.prototype.choices_count=function(){var e,t,s,i;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,i=this.form_field.options,t=0,s=i.length;s>t;t++)e=i[t],e.selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){return e.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},e.prototype.keyup_checker=function(e){var t,s;switch(t=null!=(s=e.which)?s:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:case 18:break;default:return this.results_search()}},e.prototype.clipboard_event_checker=function(){var e=this;return setTimeout(function(){return e.results_search()},50)},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return this.is_multiple&&!this.display_selected_options&&e.selected?!1:!this.display_disabled_options&&e.disabled?!1:e.empty?!1:!0},e.prototype.search_results_touchstart=function(e){return this.touch_started=!0,this.search_results_mouseover(e)},e.prototype.search_results_touchmove=function(e){return this.touch_started=!1,this.search_results_mouseout(e)},e.prototype.search_results_touchend=function(e){return this.touch_started?this.search_results_mouseup(e):void 0},e.prototype.outerHTML=function(e){var t;return e.outerHTML?e.outerHTML:(t=document.createElement("div"),t.appendChild(e),t.innerHTML)},e.browser_is_supported=function(){return/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:/IEMobile/i.test(window.navigator.userAgent)?!1:/Windows Phone/i.test(window.navigator.userAgent)?!1:/BlackBerry/i.test(window.navigator.userAgent)?!1:/BB10/i.test(window.navigator.userAgent)?!1:"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!0},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),e=jQuery,e.fn.extend({chosen:function(i){return t.browser_is_supported()?this.each(function(){var t,a;return t=e(this),a=t.data("chosen"),"destroy"===i?void(a instanceof s&&a.destroy()):void(a instanceof s||t.data("chosen",new s(this,i)))}):this}}),s=function(t){function s(){return a=s.__super__.constructor.apply(this,arguments)}return o(s,t),s.prototype.setup=function(){return this.form_field_jq=e(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},s.prototype.set_up_html=function(){var t,s;return t=["chosen-container"],t.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&t.push(this.form_field.className),this.is_rtl&&t.push("chosen-rtl"),s={"class":t.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(s.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=e("<div />",s),this.container.html(this.is_multiple?'<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>':'<a class="chosen-single chosen-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior()},s.prototype.on_ready=function(){return this.form_field_jq.trigger("chosen:ready",{chosen:this})},s.prototype.register_observers=function(){var e=this;return this.container.bind("touchstart.chosen",function(t){return e.container_mousedown(t),t.preventDefault()}),this.container.bind("touchend.chosen",function(t){return e.container_mouseup(t),t.preventDefault()}),this.container.bind("mousedown.chosen",function(t){e.container_mousedown(t)}),this.container.bind("mouseup.chosen",function(t){e.container_mouseup(t)}),this.container.bind("mouseenter.chosen",function(t){e.mouse_enter(t)}),this.container.bind("mouseleave.chosen",function(t){e.mouse_leave(t)}),this.search_results.bind("mouseup.chosen",function(t){e.search_results_mouseup(t)}),this.search_results.bind("mouseover.chosen",function(t){e.search_results_mouseover(t)}),this.search_results.bind("mouseout.chosen",function(t){e.search_results_mouseout(t)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(t){e.search_results_mousewheel(t)}),this.search_results.bind("touchstart.chosen",function(t){e.search_results_touchstart(t)}),this.search_results.bind("touchmove.chosen",function(t){e.search_results_touchmove(t)}),this.search_results.bind("touchend.chosen",function(t){e.search_results_touchend(t)}),this.form_field_jq.bind("chosen:updated.chosen",function(t){e.results_update_field(t)}),this.form_field_jq.bind("chosen:activate.chosen",function(t){e.activate_field(t)}),this.form_field_jq.bind("chosen:open.chosen",function(t){e.container_mousedown(t)}),this.form_field_jq.bind("chosen:close.chosen",function(t){e.input_blur(t)}),this.search_field.bind("blur.chosen",function(t){e.input_blur(t)}),this.search_field.bind("keyup.chosen",function(t){e.keyup_checker(t)}),this.search_field.bind("keydown.chosen",function(t){e.keydown_checker(t)}),this.search_field.bind("focus.chosen",function(t){e.input_focus(t)}),this.search_field.bind("cut.chosen",function(t){e.clipboard_event_checker(t)}),this.search_field.bind("paste.chosen",function(t){e.clipboard_event_checker(t)}),this.is_multiple?this.search_choices.bind("click.chosen",function(t){e.choices_click(t)}):this.container.bind("click.chosen",function(e){e.preventDefault()})},s.prototype.destroy=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},s.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},s.prototype.container_mousedown=function(t){return this.is_disabled||(t&&"mousedown"===t.type&&!this.results_showing&&t.preventDefault(),null!=t&&e(t.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!t||e(t.target)[0]!==this.selected_item[0]&&!e(t.target).parents("a.chosen-single").length||(t.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),e(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},s.prototype.container_mouseup=function(e){return"ABBR"!==e.target.nodeName||this.is_disabled?void 0:this.results_reset(e)},s.prototype.search_results_mousewheel=function(e){var t;return e.originalEvent&&(t=e.originalEvent.deltaY||-e.originalEvent.wheelDelta||e.originalEvent.detail),null!=t?(e.preventDefault(),"DOMMouseScroll"===e.type&&(t=40*t),this.search_results.scrollTop(t+this.search_results.scrollTop())):void 0},s.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},s.prototype.close_field=function(){return e(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},s.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},s.prototype.test_active_click=function(t){var s;return s=e(t.target).closest(".chosen-container"),s.length&&this.container[0]===s[0]?this.active_field=!0:this.close_field()},s.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},s.prototype.result_do_highlight=function(e){var t,s,i,a,n;if(e.length){if(this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClass("highlighted"),i=parseInt(this.search_results.css("maxHeight"),10),n=this.search_results.scrollTop(),a=i+n,s=this.result_highlight.position().top+this.search_results.scrollTop(),t=s+this.result_highlight.outerHeight(),t>=a)return this.search_results.scrollTop(t-i>0?t-i:0);if(n>s)return this.search_results.scrollTop(s)}},s.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},s.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},s.prototype.update_results_content=function(e){return this.search_results.html(e)},s.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},s.prototype.set_tab_index=function(){var e;return this.form_field.tabIndex?(e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=e):void 0},s.prototype.set_label_behavior=function(){var t=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=e("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(e){return t.is_multiple?t.container_mousedown(e):t.activate_field()}):void 0},s.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},s.prototype.search_results_mouseup=function(t){var s;return s=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),s.length?(this.result_highlight=s,this.result_select(t),this.search_field.focus()):void 0},s.prototype.search_results_mouseover=function(t){var s;return s=e(t.target).hasClass("active-result")?e(t.target):e(t.target).parents(".active-result").first(),s?this.result_do_highlight(s):void 0},s.prototype.search_results_mouseout=function(t){return e(t.target).hasClass("active-result")?this.result_clear_highlight():void 0},s.prototype.choice_build=function(t){var s,i,a=this;return s=e("<li />",{"class":"search-choice"}).html("<span>"+this.choice_label(t)+"</span>"),t.disabled?s.addClass("search-choice-disabled"):(i=e("<a />",{"class":"search-choice-close","data-option-array-index":t.array_index}),i.bind("click.chosen",function(e){return a.choice_destroy_link_click(e)}),s.append(i)),this.search_container.before(s)},s.prototype.choice_destroy_link_click=function(t){return t.preventDefault(),t.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(e(t.target))},s.prototype.choice_destroy=function(e){return this.result_deselect(e[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),e.parents("li").first().remove(),this.search_field_scale()):void 0},s.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},s.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()
},s.prototype.result_select=function(e){var t,s;return this.result_highlight?(t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClass("active-result"):this.reset_single_select_options(),t.addClass("result-selected"),s=this.results_data[t[0].getAttribute("data-option-array-index")],s.selected=!0,this.form_field.options[s.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(s):this.single_set_selected_text(this.choice_label(s)),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.show_search_field_default(),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[s.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,e.preventDefault(),this.search_field_scale())):void 0},s.prototype.single_set_selected_text=function(e){return null==e&&(e=this.default_text),e===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").html(e)},s.prototype.result_deselect=function(e){var t;return t=this.results_data[e],this.form_field.options[t.options_index].disabled?!1:(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[t.options_index].value}),this.search_field_scale(),!0)},s.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},s.prototype.get_search_text=function(){return e("<div/>").text(e.trim(this.search_field.val())).html()},s.prototype.winnow_results_set_highlight=function(){var e,t;return t=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),e=t.length?t.first():this.search_results.find(".active-result").first(),null!=e?this.result_do_highlight(e):void 0},s.prototype.no_results=function(t){var s;return s=e('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),s.find("span").first().html(t),this.search_results.append(s),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},s.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},s.prototype.keydown_arrow=function(){var e;return this.results_showing&&this.result_highlight?(e=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(e):void 0:this.results_show()},s.prototype.keyup_arrow=function(){var e;return this.results_showing||this.is_multiple?this.result_highlight?(e=this.result_highlight.prevAll("li.active-result"),e.length?this.result_do_highlight(e.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},s.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(e=this.search_container.siblings("li.search-choice").last(),e.length&&!e.hasClass("search-choice-disabled")?(this.pending_backstroke=e,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},s.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},s.prototype.keydown_checker=function(e){var t,s;switch(t=null!=(s=e.which)?s:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:this.results_showing&&e.preventDefault();break;case 32:this.disable_search&&e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},s.prototype.search_field_scale=function(){var t,s,i,a,n,o,r,l,c;if(this.is_multiple){for(i=0,r=0,n="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,c=o.length;c>l;l++)a=o[l],n+=a+":"+this.search_field.css(a)+";";return t=e("<div />",{style:n}),t.text(this.search_field.val()),e("body").append(t),r=t.width()+25,t.remove(),s=this.container.outerWidth(),r>s-10&&(r=s-10),this.search_field.css({width:r+"px"})}},s}(t)}).call(this)}.apply(e,arguments)})}(this),function(e){define("angular-chosen",["angular","jquery-chosen"],function(){return function(){(function(){var e=[].indexOf||function(e){for(var t=0,s=this.length;s>t;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("localytics.directives",[]),angular.module("localytics.directives").directive("chosen",["$timeout",function(t){var s,i,a,n;return i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s=["persistentCreateOption","createOptionText","createOption","skipNoResults","noResultsText","allowSingleDeselect","disableSearchThreshold","disableSearch","enableSplitWordSearch","inheritSelectClasses","maxSelectedOptions","placeholderTextMultiple","placeholderTextSingle","searchContains","singleBackstrokeDelete","displayDisabledOptions","displaySelectedOptions","width","includeGroupLabelInSelected","maxShownResults"],n=function(e){return e.replace(/[A-Z]/g,function(e){return"_"+e.toLowerCase()})},a=function(e){var t;if(angular.isArray(e))return 0===e.length;if(angular.isObject(e))for(t in e)if(e.hasOwnProperty(t))return!1;return!0},{restrict:"A",require:"?ngModel",priority:1,link:function(o,r,l,c){var u,d,h,p,_,m,f,g,v,b,y;return o.disabledValuesHistory=o.disabledValuesHistory?o.disabledValuesHistory:[],r=$(r),r.addClass("localytics-chosen"),_=o.$eval(l.chosen)||{},angular.forEach(l,function(t,i){return e.call(s,i)>=0?l.$observe(i,function(e){return _[n(i)]="{{"===String(r.attr(l.$attr[i])).slice(0,2)?e:o.$eval(e),v()}):void 0}),f=function(){return r.addClass("loading").attr("disabled",!0).trigger("chosen:updated")},g=function(){return r.removeClass("loading"),angular.isDefined(l.disabled)?r.attr("disabled",l.disabled):r.attr("disabled",!1),r.trigger("chosen:updated")},u=null,d=!1,h=function(){var e;return u?r.trigger("chosen:updated"):(t(function(){u=r.chosen(_).data("chosen")}),angular.isObject(u)?e=u.default_text:void 0)},v=function(){return d?r.attr("data-placeholder",u.results_none_found).attr("disabled",!0):r.removeAttr("data-placeholder"),r.trigger("chosen:updated")},c?(m=c.$render,c.$render=function(){return m(),h()},r.on("chosen:hiding_dropdown",function(){return o.$apply(function(){return c.$setTouched()})}),l.multiple&&(y=function(){return c.$viewValue},o.$watch(y,c.$render,!0))):h(),l.$observe("disabled",function(){return r.trigger("chosen:updated")}),l.ngOptions&&c?(p=l.ngOptions.match(i),b=p[7],o.$watchCollection(b,function(e){var s;return s=t(function(){return angular.isUndefined(e)?f():(d=a(e),g(),v())})}),o.$on("$destroy",function(){return"undefined"!=typeof timer&&null!==timer?t.cancel(timer):void 0})):void 0}}}])}).call(this)}.apply(e,arguments)})}(this),define("app/filters/encodeURIComponent",["angular"],function(e){"use strict";var t;try{t=e.module("cpanel.emailAccounts")}catch(s){t=e.module("cpanel.emailAccounts",[])}t.filter("encodeURIComponent",function(){return window.encodeURIComponent})}),define("app/decorators/paginationDecorator",["angular","cjt/core","cjt/util/locale","uiBootstrap"],function(e,t,s){"use strict";var i,a="cpanel.emailAccounts";try{i=e.module(a)}catch(n){i=e.module(a,["ui.bootstrap.pagination"])}return i.config(["$provide",function(e){e.decorator("uibPaginationDirective",["$delegate",function(e){var i="decorators/pagination.phtml",a="email_accounts/"+i,n=e[0],o=function(e,t){e&&e.forEach(function(e){e.id=t+"_"+e.text})},r=function(e){e&&e.forEach(function(e){e.ariaLabel=s.maketext("Go to page “[_1]”.",e.text)})},l=function(e,t){return s.maketext("Page [numf,_1] of [numf,_2]",e,t)};n.templateUrl=t.config.debug?t.buildFullPath(a):i;var c=n.link;return n.compile=function(){return function(e,t,i,a){var n=a[0];c.apply(this,arguments),e.parentId=i.id,e.ariaLabels={title:s.maketext("Pagination"),firstPage:s.maketext("Go to first page."),previousPage:s.maketext("Go to previous page."),nextPage:s.maketext("Go to next page."),lastPage:s.maketext("Go to last page.")},e.updateCurrentSelectedText=l;var u=n.render;n.render=function(){u.apply(n),o(e.pages,e.parentId),r(e.pages)}}},e}])}]),{namespace:a}}),define("app/views/list",["lodash","angular","cjt/util/locale","uiBootstrap","cjt/services/alertService","cjt/directives/alert","cjt/directives/alertList","cjt/directives/actionButtonDirective","cjt/directives/toggleSortDirective","cjt/directives/searchDirective","cjt/services/cpanel/componentSettingSaverService","cjt/directives/pageSizeButtonDirective","app/services/emailAccountsService","cjt/directives/statsDirective","cjt/directives/indeterminateState","app/decorators/paginationDecorator","cjt/directives/disableAnimations"],function(e,t,s){"use strict";var i;try{i=t.module("cpanel.emailAccounts")}catch(a){i=t.module("cpanel.emailAccounts",[])}i.value("PAGE",PAGE);var n=i.controller("ListController",["$scope","$location","emailAccountsService","PAGE","alertService","$timeout","$routeParams","$window","componentSettingSaverService","ONE_MEBIBYTE",function(a,n,o,r,l,c,u,d,h){function p(){b.selectAllState=!1,b.checkedCount=0,b.multiDeleteSelected=!1}function _(e){var t=document.getElementById("account-name_"+e);if(t){var s=d.getComputedStyle(t).width;if(s)return s=s.slice(0,-2),s>=k}return!0}function m(e,t){localStorage.setItem(b.storageKeys[e],r.securityToken+":"+t)}function f(e,t){var s={"api.sort":1,"api.sort_column_0":e.meta.sortBy,"api.sort_method_0":t,"api.sort_reverse_0":"asc"===e.meta.sortDirection?0:1,"api.paginate":1,"api.paginate_start":(e.meta.currentPage-1)*e.meta.pageSize+1,"api.paginate_size":e.meta.pageSize,"api.paginate_page":e.meta.currentPage};switch("user"!==e.meta.sortBy&&(s["api.sort_column_1"]="user",s["api.sort_method_1"]="lexicographic"),e.quickFilter){case"restricted":s["api.filter_term_1"]=1,s["api.filter_type_1"]="eq",s["api.filter_column_1"]="has_suspended";break;case"default":s["api.filter_term_1"]="Main Account",s["api.filter_type_1"]="eq",s["api.filter_column_1"]="login",e.meta.filterValue="",delete s["api.paginate"],delete s["api.paginate_start"],delete s["api.paginate_size"],delete s["api.paginate_page"],e.meta.currentPage=1;break;case"overUsed":s["api.filter_term_1"]=100,s["api.filter_type_1"]="gt",s["api.filter_column_1"]="diskusedpercent"}return e.meta.filterValue&&""!==e.meta.filterValue&&(s["api.filter"]=1,s["api.filter_term_0"]=e.meta.filterValue,s["api.filter_column_0"]="login"),s}function g(e){var t=e.shift();"undefined"!=typeof t&&null!==t&&c(function(){b.meta.accounts=b.meta.accounts.concat(t),g(e)},0)}function v(){return i.firstLoad&&r.nvdata&&r.nvdata.hasOwnProperty(y)&&b.setMetaFromComponentSettings(r.nvdata[y]),i.firstLoad=!1,b.loadingEmailAccounts=!0,h.register(y).then(function(e){return e&&(u.account&&u.account!==e.filterValue&&(e.filterValue=u.account,b.meta.currentPage=1,b.meta.accounts=void 0,b.saveMetaToComponentSettings()),b.setMetaFromComponentSettings(e)),b.meta.accounts?void 0:b.fetch()},function(){return b.meta.accounts?void 0:b.fetch()})}var b=this;b.isRTL=r.isRTL,b.statsCssClass="hide-stats",o.getEmailStats().then(function(e){a.accountStats=e,b.statsCssClass="animate-stats"}),a.upgradeLink=o.getUpgradeUrl(),b.createEmail=function(){n.path("/create")};var y="EmailAccountsTable",w={filter:"EmailAccountsListFilter",currentPage:"EmailAccountsListCurrentPage",quickFilter:"EmailAccountsListQuickFilter"};i.firstLoad&&e.forOwn(w,function(e){localStorage.removeItem(e)});var k=200,x=250;b.webmailEnabled=r.webmailEnabled,b.dprefix=r.dprefix,b.loadingEmailAccounts=!1,b.filterTermPending=!0,b.storageKeys=w,b.meta={sortReverse:!1,sortBy:"user",sortDirection:"asc",sortFields:["user","domain","has_suspended","_diskused","_diskquota","diskusedpercent_float"],showPager:!1,maxPages:5,totalItems:0,currentPage:1,pageSizes:[20,50,100,500],pageSize:20,start:0,limit:10},b.multiDeleteSelected=!1,b.checkedCount=0,b.selectAllState=!1;var A={},S=localStorage.getItem(b.storageKeys.filter);b.meta.filterValue=S&&0===S.indexOf(r.securityToken+":")?S.substr(1+r.securityToken.length):"";var C=localStorage.getItem(b.storageKeys.quickFilter);b.quickFilter=C&&0===C.indexOf(r.securityToken+":")?C.substr(1+r.securityToken.length):"all";var E=localStorage.getItem(b.storageKeys.currentPage);b.meta.currentPage=E&&0===E.indexOf(r.securityToken+":")?E.substr(1+r.securityToken.length):1,u.account&&u.account!==b.meta.filterValue&&(b.meta.filterValue=u.account,b.meta.accounts=void 0),b.setMetaFromComponentSettings=function(t){t.hasOwnProperty("sortBy")&&t.sortBy&&e.find(b.meta.sortFields,function(e){return e===t.sortBy})&&(b.meta.sortBy=t.sortBy),t.hasOwnProperty("sortDirection")&&t.sortDirection&&("asc"===t.sortDirection||"desc"===t.sortDirection)&&(b.meta.sortDirection=t.sortDirection),t.hasOwnProperty("pageSize")&&t.pageSize&&e.find(b.meta.pageSizes,function(e){return e===parseInt(t.pageSize)})&&(b.meta.pageSize=parseInt(t.pageSize))},b.saveMetaToComponentSettings=function(){h.set(y,{sortBy:b.meta.sortBy,sortDirection:b.meta.sortDirection,pageSize:b.meta.pageSize})},b.clearStatus=function(e){if(e&&e.deleted){var t=b.meta.accounts.indexOf(e);if(t>-1&&(b.meta.accounts.splice(t,1),b.meta.totalItems--,b.meta.mobileItemCountText=s.maketext("[_1] - [_2] of [_3]",b.meta.start,b.meta.limit,b.meta.totalItems)),e.isExpanded=!1,0===b.meta.accounts.length&&b.meta.totalItems>b.meta.pageSize)return b.meta.currentPage===b.meta.totalPages&&b.meta.currentPage--,b.fetch()}},b.sortList=function(){b.currentFetchTimeout&&c.cancel(b.currentFetchTimeout),b.currentFetchTimeout=c(function(){return b.saveMetaToComponentSettings(),p(),b.meta.currentPage=1,m("currentPage",b.meta.currentPage),b.fetch()},x)},b.selectPage=function(){return b.loadingEmailAccounts?void 0:(b.currentFetchTimeout&&c.cancel(b.currentFetchTimeout),b.currentFetchTimeout=c(function(){return p(),m("currentPage",b.meta.currentPage),b.fetch()},x))},b.selectPageSize=function(){b.currentFetchTimeout&&c.cancel(b.currentFetchTimeout),b.currentFetchTimeout=c(function(){return b.saveMetaToComponentSettings(),p(),b.meta.currentPage=1,b.fetch()},x)},b.searchList=function(){return b.filterTermPending=!0,b.meta.currentPage=1,p(),m("filter",b.meta.filterValue),m("currentPage",b.meta.currentPage),b.fetch()},b.getSelectedState=function(){return b.checkedCount>0||b.selectAllState},b.getIndeterminateState=function(){return b.checkedCount>0&&!b.selectAllState},b.toggleSelection=function(e){e.selected?(b.checkedCount++,A[e.email]=!0):(b.checkedCount--,delete A[e.email]),0===b.checkedCount&&(b.multiDeleteSelected=!1),b.selectAllState=b.checkedCount===b.meta.accounts.length},b.toggleSelectAll=function(){if(0!==b.meta.accounts.length){var e=b.checkedCount>0&&b.checkedCount!==b.meta.accounts.length;e&&(b.selectAllState=!b.selectAllState);for(var t=0,s=b.meta.accounts.length;s>t;t++){var i=b.meta.accounts[t];i.isDefault||(i.selected=b.selectAllState,b.selectAllState?A[i.email]=b.selectAllState:delete A[i.email])}b.selectAllState?b.checkedCount=s:(b.checkedCount=0,b.multiDeleteSelected=!1)}},b.getDeleteMultipleMsg=function(){var e;if(b.checkedCount>1)return s.maketext("Delete the selected [quant,_1,email account,email accounts]?",b.checkedCount);if(1===b.checkedCount){for(var t=0,i=b.meta.accounts.length;i>t;t++)if(b.meta.accounts[t].selected){e=b.meta.accounts[t].email;break}return s.maketext("Delete “[_1]”?",e)}},b.getMultiDeleteButtonTxt=function(){return s.maketext("Delete ([numf,_1])",b.checkedCount)},b.delete=function(e){return e.delete_requested=!0,e.removing=!0,1===b.meta.accounts.length&&b.meta.filterValue&&(b.filterTermPending=!0),o.deleteEmail(e.email).then(function(){b.filterTermPending=!1,l.add({message:s.maketext("Account “[_1]” deleted.",e.user+"@"+e.domain),type:"success",closeable:!0,autoClose:1e4,group:"emailAccounts"}),e.delete_requested=!1,e.removing=!1,e.deleted=!0,delete A[e.email],b.checkedCount--,b.meta.filterValue&&1===b.meta.accounts.length&&b.meta.totalItems<=b.meta.pageSize&&(b.meta.accounts=[]),b.clearStatus(e)},function(t){l.add({type:"danger",message:t,closeable:!0,group:"emailAccounts"}),e.delete_requested=!1,e.removing=!1,e.deleted=!1})},b.deleteMultiple=function(){b.removingMultiple=!0;for(var e=[],t=0,i=b.meta.accounts.length;i>t;t++)b.meta.accounts[t].selected&&!b.meta.accounts[t].isDefault&&e.push(b.meta.accounts[t]);return 1===b.meta.accounts.length&&b.meta.filterValue&&(b.filterTermPending=!0),o.deleteEmails(e).then(function(){var t="";e.length>1?t=s.maketext("Deleted [numf,_1] email accounts.",e.length):1===e.length&&(t=s.maketext("Email account “[_1]” deleted.",e[0].user+"@"+e[0].domain)),l.add({message:t,type:"success",closeable:!0,autoClose:1e4,group:"emailAccounts"}),p(),b.removingMultiple=!1;for(var i=0,a=e.length;a>i;i++)delete A[e[0]];return b.fetch()},function(e){l.add({type:"danger",message:e,closeable:!0,group:"emailAccounts"}),b.removingMultiple=!1,b.multiDeleteSelected=!1})},b.showNoAvailableAccountsWarning=function(){a.showNoAvailableAccounts=!a.showNoAvailableAccounts},b.closeCallout=function(){a.showNoAvailableAccounts=!1},b.fetch=function(){b.loadingEmailAccounts=!0;var i="lexicographic";"_diskused"===b.meta.sortBy||"diskusedpercent_float"===b.meta.sortBy||"has_suspended"===b.meta.sortBy?i="numeric":"_diskquota"===b.meta.sortBy&&(i="numeric_zero_as_max");var a=f(b,i);b.meta.accounts=[];var n=t.element("#popsAccountList");n&&n[0]&&n.css({minHeight:d.getComputedStyle(n[0]).height});var r=o.getEmailAccounts(a);return b.fetchPromise=r,r.then(function(i){if(b.fetchPromise===r){p();var a=i.data,n=i.meta;if(b.meta.totalItems=n.paginate.total_records,b.meta.totalPages=n.paginate.total_pages,b.meta.currentPage=n.paginate.current_page,b.meta.totalItems>e.min(b.meta.pageSizes)){b.meta.showPager=!0;var o=(b.meta.currentPage-1)*b.meta.pageSize;b.meta.start=o+1,b.meta.limit=o+a.length}else b.meta.showPager=!1,b.meta.start=0===a.length?0:1,b.meta.limit=a.length;b.meta.mobileItemCountText=s.maketext("[_1] - [_2] of [_3]",b.meta.start,b.meta.limit,b.meta.totalItems),t.element("#popsAccountList").css({minHeight:""});for(var l=0,c=a.length;c>l;l++)A[a[l].email]&&!a[l].isDefault&&(a[l].selected=!0,b.checkedCount++);if(b.selectAllState=a.length>0?b.checkedCount===a.length:!1,a.length>100){for(var u=[],d=50;a.length;)u.push(a.splice(0,d));b.meta.accounts=u.shift(),g(u)}else b.meta.accounts=a;b.loadingEmailAccounts=!1,b.filterTermPending=!1}},function(e){l.add({type:"danger",message:e,closeable:!0,group:"emailAccounts"}),b.loadingEmailAccounts=!1,b.filterTermPending=!1})},b.filterEmails=function(){return b.quickFilter?(b.meta.currentPage=1,m("quickFilter",b.quickFilter),m("currentPage",b.meta.currentPage),b.fetch()):void 0},b.getSearchClass=function(){return b.filterTermPending||b.loadingEmailAccounts||!b.meta.filterValue?"":b.meta.accounts&&b.meta.accounts.length>0?"success":"danger"},b.getDetails=function(e,t){t&&(e.displayInnerEmail=_(e.email)),e.isExpanded=t},b.connectDevices=function(e){var t=b.dprefix+"mail/clientconf.html?acct="+encodeURIComponent(e.email);window.location.href=t},b.manageAccount=function(e,t){if(e&&e.isDefault)n.path("/manageDefault/");else{var s="/manage/"+encodeURIComponent(e.email);"undefined"!=typeof t&&t&&(s=s+"/"+t),n.path(s)}},a.$on("$destroy",function(){h.unregister(y)}),v()}]);return n}),define("app/validators/emailAccountFullLength",["angular"],function(e){"use strict";var t;try{t=e.module("cpanel.emailAccount")}catch(s){t=e.module("cpanel.emailAccount",[])}t.directive("emailFulllength",function(){return{require:"ngModel",restrict:"A",link:function(e,t,s,i){function a(){return n||(n=e.$eval(s.emailOtherValue)),n}i.$validators.emailFulllength=function(e,t){var n=a();if(!n){var o=t||"";return o.length+1<=s.emailFulllength}var r=i.$isEmpty(t),l=n.$isEmpty(n.$viewValue);if(r&&l)return!0;var c=t||"",u=n.$pending||n.$invalid?n.$viewValue:n.$modelValue;return c.length+u.length+1<=s.emailFulllength},e.$watchGroup([function(){var e=a();return e&&e.$viewValue},function(){var e=a();return e&&e.$modelValue}],function(){i.$validate()});var n}}})}),define("app/views/create",["angular","lodash","cjt/util/locale","cjt/util/parse","uiBootstrap","cjt/validator/email-validator","app/services/emailAccountsService","app/validators/emailAccountFullLength","cjt/directives/statsDirective","cjt/directives/passwordFieldDirective","cjt/services/alertService","cjt/directives/alert","cjt/directives/alertList","cjt/directives/actionButtonDirective","cjt/directives/toggleLabelInfoDirective","cjt/directives/labelSuffixDirective","cjt/directives/validationContainerDirective","cjt/directives/validationItemDirective","cjt/directives/bytesInput","cjt/services/cpanel/componentSettingSaverService"],function(e,t,s,i){"use strict";var a;try{a=e.module("cpanel.emailAccounts")}catch(n){a=e.module("cpanel.emailAccounts",[])}a.value("PAGE",PAGE);var o=a.controller("CreateController",["$scope","$location","$anchorScroll","$timeout","emailAccountsService","PAGE","alertService","$routeParams","componentSettingSaverService","$q",function(t,a,n,o,r,l,c,u,d,h){function p(){return h.all([d.register(g),r.getMailDomains(),r.getEmailStats()]).then(function(e){return t.mailDomains=e[1],t.accountStats=e[2],f.statsCssClass="animate-stats",_().then(function(e){f.details=e})},function(e){c.add({type:"danger",message:e,closeable:!0,replace:!1,group:"emailAccounts"})}).finally(function(){f.isLoading=!1})}function _(e){return d.get(g).then(function(s){if("undefined"!=typeof s&&s&&(t.showAllHelp=s.showAllHelp),t.accountStats.available){var n={};return n.userName=null,n.domain=null,e?n.domain=f.details.domain:t.mailDomains.length>0&&(n.domain="undefined"!=typeof v&&v&&-1!==t.mailDomains.indexOf(v)?v:l.primaryDomain),n.quota=t.defaultQuota,n.password=null,n.quotaType=l.defaultQuotaSelected,n.sendWelcomeEmail=!0,n.setPassword=!0,n.recoveryEmail=null,n.assignMaxDiskspace=!1,n.quotaUnit="MB",n.stayOnView=i.parseBoolean(r.getStoredValue(b.stayOnPage)),n}m=o(function(){a.path("/list")},1e4)})}var m,f=this,g="EmailAccountsCreate",v=decodeURIComponent(u.domain),b={stayOnPage:"EmailAccountsCreateStayOnPage"};n.yOffset=70,f.isRTL=l.isRTL,f.isLoading=!0,f.statsCssClass="hide-stats",f.details={},t.showAllHelp=!1,t.upgradeURL=r.getUpgradeUrl(),t.requiredPasswordStrength=l.requiredPasswordStrength,t.isInviteSubEnabled=!!l.isInviteSubEnabled,t.defaultQuota=l.userDefinedQuotaDefaultValue?l.userDefinedQuotaDefaultValue:void 0,t.maxQuota=l.maxEmailQuota,t.canSetUnlimited=l.canSetUnlimited,t.maxQuotaHelpText=s.maketext("Quotas cannot exceed [format_bytes,_1].",1024*l.maxEmailQuota*1024),t.maxEmailQuotaText=l.canSetUnlimited?s.maketext("Unlimited"):s.maketext("[format_bytes,_1]",1024*l.maxEmailQuota*1024),t.mailDomains=[],p(),f.saveToComponentSettings=function(){return d.set(g,{showAllHelp:t.showAllHelp})},f.stayOnPageChanged=function(){f.details.stayOnView?localStorage.setItem(b.stayOnPage,l.securityToken+":true"):localStorage.removeItem(b.stayOnPage)},f.scrollToMissingDomains=function(){n("missingDomainSection");var t=e.element(document.querySelector("#missingDomainSection"));t.addClass("section-highlight"),o(function(){t.removeClass("section-highlight")},11e3)},f.create=function(e){return f.frmCreateEmail.$submitted=!0,f.frmCreateEmail.$valid&&!f.frmCreateEmail.$pending&&"undefined"!=typeof e&&e?("unlimited"===e.quotaType&&(e.quota=t.canSetUnlimited?0:t.maxQuota),r.createEmail(e).then(function(){return c.add({type:"success",message:s.maketext("You created “[_1]” ([output,url,_2,View]).",e.userName+"@"+e.domain,"#/list/"+e.userName+"@"+e.domain),closeable:!0,replace:!1,autoClose:1e4,group:"emailAccounts"}),r.getEmailStats().then(function(e){return t.accountStats=e,f.details.stayOnView?_(!0).then(function(e){f.details=e,f.frmCreateEmail.$setPristine()}):void f.backToListView()})},function(e){c.add({type:"danger",message:e,closeable:!0,replace:!1,group:"emailAccounts"})})):void 0},f.backToListView=function(){a.path("/list")},f.toggleHelp=function(){t.showAllHelp=!t.showAllHelp,f.saveToComponentSettings(),t.$broadcast("showHideAllChange",t.showAllHelp)},t.$on("$destroy",function(){localStorage.removeItem(b.stayOnPage),d.unregister(g),o.cancel(m)})}]);return o}),define("app/views/manage",["angular","lodash","cjt/util/locale","cjt/util/parse","uiBootstrap","app/services/emailAccountsService","app/filters/encodeURIComponent","cjt/services/alertService","cjt/directives/alert","cjt/directives/alertList","cjt/directives/actionButtonDirective","cjt/directives/toggleSwitchDirective","cjt/directives/toggleLabelInfoDirective","cjt/directives/validationContainerDirective","cjt/directives/validationItemDirective","cjt/services/cpanel/componentSettingSaverService"],function(e,t,s,i){"use strict";var a=e.module("cpanel.emailAccounts");a.value("PAGE",PAGE);var n=a.controller("ManageController",["$scope","$location","$anchorScroll","$timeout","emailAccountsService","PAGE","alertService","$routeParams","componentSettingSaverService",function(a,n,o,r,l,c,u,d,h){function p(){w={},f.currentSuspendedState={},f.suspendOptions={},f.details={}}function _(){return r(function(){if("undefined"!=typeof y&&y){o(y);var t=e.element(document.querySelector("#"+y));return t.addClass("restriction-section-highlight"),r(function(){t.removeClass("restriction-section-highlight")},11e3)}},1e3)}function m(){return h.get(v).then(function(e){"undefined"!=typeof e&&e&&(a.showAllHelp=e.showAllHelp)}),l.getEmailAccountDetails(b).then(function(e){return w=e,f.details=e,f.suspendOptions.login=f.currentSuspendedState.login=e.suspended_login,f.suspendOptions.incoming=f.currentSuspendedState.incoming=e.suspended_incoming,f.suspendOptions.suspended_outgoing=e.suspended_outgoing,f.suspendOptions.hold_outgoing=e.hold_outgoing,f.suspendOptions.has_suspended=e.has_suspended,f.suspendOptions.outgoing=f.currentSuspendedState.outgoing=f.suspendOptions.suspended_outgoing===!0?"suspend":f.suspendOptions.hold_outgoing===!0?"hold":"allow","hold"===f.suspendOptions.outgoing?l.getHeldMessageCount(b).then(function(e){return f.suspendOptions.currentlyHeld=e,f.isLoading=!1,_()},function(e){u.add({type:"danger",message:e,closeable:!0,replace:!1,group:"emailAccounts"}),f.isLoading=!1}):(f.isLoading=!1,_())},function(e){u.add({type:"danger",message:e,closeable:!0,replace:!1,group:"emailAccounts"}),f.isLoading=!1,f.backToListView()})}var f=this;f.isLoading=!0,f.isRTL=c.isRTL,o.yOffset=70;var g={stayOnPage:"EmailAccountsManageStayOnPage"};a.showAllHelp=!1;var v="EmailAccountsManage";h.register(v),f.dprefix=c.dprefix,f.webmailEnabled=i.parseBoolean(c.webmailEnabled),f.requiredPasswordStrength=c.requiredPasswordStrength,f.externalAuthConfig=c.externalAuthModulesConfigured,f.showCalAndContacts=c.showCalendarAndContactItems,f.emailDiskUsageEnabled=c.emailDiskUsageEnabled,f.emailFiltersEnabled=c.emailFiltersEnabled,f.autoResponderEnabled=c.autoResponderEnabled,a.defaultQuota=c.userDefinedQuotaDefaultValue?c.userDefinedQuotaDefaultValue:void 0,a.maxQuota=c.maxEmailQuota,a.canSetUnlimited=c.canSetUnlimited,a.maxQuotaHelpText=s.maketext("Quotas cannot exceed [format_bytes,_1].",1024*c.maxEmailQuota*1024),a.maxEmailQuotaText=c.canSetUnlimited?s.maketext("Unlimited"):s.maketext("[format_bytes,_1]",1024*c.maxEmailQuota*1024),f.stayOnView=i.parseBoolean(l.getStoredValue(g.stayOnPage)),a.showAllHelp=!1;var b=decodeURIComponent(d.emailAccount),y=d.scrollTo,w={};f.currentSuspendedState={},f.suspendOptions={},f.saveToComponentSettings=function(){h.set(v,{showAllHelp:a.showAllHelp})},f.stayOnPageChanged=function(){f.stayOnView?localStorage.setItem(g.stayOnPage,c.securityToken+":true"):localStorage.removeItem(g.stayOnPage)},f.toggleHelp=function(){a.showAllHelp=!a.showAllHelp,f.saveToComponentSettings(),a.$broadcast("showHideAllChange",a.showAllHelp)},f.currentlyHeldMessageText=function(e){return s.maketext("Delete [quant,_1,message,messages] from the mail queue.",e)},f.update=function(e){return f.frmManageAccount.$submitted=!0,f.frmManageAccount.$valid&&!f.frmManageAccount.$pending?("unlimited"!==e.quotaType||a.canSetUnlimited?"unlimited"===e.quotaType&&(e.quota=0):e.quota=a.maxQuota,l.updateEmail(w,e,f.currentSuspendedState,f.suspendOptions).then(function(i){var a=0,n=[];t.forEach(i,function(e){"danger"===e.type?u.add({type:e.type,message:e.message,closeable:!0,replace:!1,autoClose:e.autoClose,group:"emailAccounts"}):"success"===e.type&&(n.push(e),a+=1)}),a&&(u.add(a>1?{type:"success",message:s.maketext("All of your changes to “[_1]” are saved.",e.email),closeable:!0,replace:!1,autoClose:1e4,group:"emailAccounts"}:{type:"success",message:n[0].message,closeable:!0,replace:!1,autoClose:1e4,group:"emailAccounts"}),f.stayOnView?(f.isLoading=!0,f.frmManageAccount.$setPristine(),p(),m()):f.backToListView())},function(e){u.add({type:"danger",message:e.message,closeable:!0,replace:!1,group:"emailAccounts"})})):void 0},f.delete=function(e){return l.deleteEmail(e).then(function(){u.add({type:"success",message:s.maketext("You deleted “[_1]”.",e),closeable:!0,replace:!1,autoClose:1e4,group:"emailAccounts"}),f.backToListView()},function(e){u.add({type:"danger",message:e,closeable:!0,replace:!1,group:"emailAccounts"})})},f.backToListView=function(){n.path("/list")},a.$on("$destroy",function(){h.unregister(v),localStorage.removeItem(g.stayOnPage)}),m()}]);return n}),define("app/views/manageDefault",["angular","lodash","cjt/util/locale","cjt/util/parse","uiBootstrap","app/services/emailAccountsService","app/filters/encodeURIComponent","cjt/services/alertService","cjt/directives/alert","cjt/directives/alertList","cjt/directives/actionButtonDirective","cjt/directives/toggleSwitchDirective","cjt/directives/toggleLabelInfoDirective","cjt/directives/validationContainerDirective","cjt/directives/validationItemDirective"],function(e,t,s,i){"use strict";var a=e.module("cpanel.emailAccounts");a.value("PAGE",PAGE);var n=a.controller("ManageDefaultController",["$scope","$location","emailAccountsService","PAGE","alertService","$q",function(e,t,a,n,o,r){function l(){var e=a.getDefaultAccountUsage().then(function(e){c.diskUsage=e},function(e){o.add({type:"danger",message:e,closeable:!0,replace:!1,group:"emailAccounts"}),c.backToListView()}),t=a.isSharedAddressBookEnabled().then(function(e){c.shareAddressBook=i.parsePerlBoolean(e.shared)},function(e){o.add({type:"danger",message:e,closeable:!0,replace:!1,group:"emailAccounts"}),c.backToListView()}),s=a.isUTF8MailboxNamesEnabled().then(function(e){c.UTF8Mailbox=i.parsePerlBoolean(e.enabled)},function(e){o.add({type:"danger",message:e,closeable:!0,replace:!1,group:"emailAccounts"}),c.backToListView()});r.all([e,t,s]).then(function(){c.isLoading=!1})}var c=this;c.isLoading=!0,c.isRTL=n.isRTL,e.showAllHelp=!1,c.email=n.mainEmailAccount,c.webmailEnabled=i.parseBoolean(n.webmailEnabled),c.emailDiskUsageEnabled=n.emailDiskUsageEnabled,c.defaultAddressEnabled=n.defaultAddressEnabled,c.dprefix=n.dprefix,c.toggleHelp=function(){e.showAllHelp=!e.showAllHelp,e.$broadcast("showHideAllChange",e.showAllHelp)},c.toggleSharedAddressBookStatus=function(){return c.shareAddressBook=!c.shareAddressBook,c.shareAddressBook?a.enableSharedAddressBook().then(function(){o.add({type:"success",message:s.maketext("All of your email accounts can access the system-managed [output,em,Shared Address Book]."),closeable:!0,replace:!1,autoClose:1e4,group:"emailAccounts"})
},function(e){o.add({type:"danger",message:e,closeable:!0,replace:!1,group:"emailAccounts"}),c.backToListView()}):a.disableSharedAddressBook().then(function(){o.add({type:"success",message:s.maketext("Only your default email address can access the system-managed [output,em,Shared Address Book]."),closeable:!0,replace:!1,autoClose:1e4,group:"emailAccounts"})},function(e){o.add({type:"danger",message:e,closeable:!0,replace:!1,group:"emailAccounts"}),c.backToListView()})},c.toggleUTF8MailboxNames=function(){return c.UTF8Mailbox=!c.UTF8Mailbox,c.UTF8Mailbox?a.enableUTF8MailboxNames().then(function(){o.add({type:"success",message:s.maketext("Mailbox names will now save as [asis,UTF-8]."),closeable:!0,replace:!1,autoClose:1e4,group:"emailAccounts"})},function(e){o.add({type:"danger",message:e,closeable:!0,replace:!1,group:"emailAccounts"}),c.backToListView()}):a.disableUTF8MailboxNames().then(function(){o.add({type:"success",message:s.maketext("Mailbox names will no longer save as [asis,UTF-8]."),closeable:!0,replace:!1,autoClose:1e4,group:"emailAccounts"})},function(e){o.add({type:"danger",message:e,closeable:!0,replace:!1,group:"emailAccounts"}),c.backToListView()})},c.backToListView=function(){t.path("/list")},l()}]);return n}),define("app/index",["angular","cjt/core","cjt/modules","cjt/util/locale","ngRoute","uiBootstrap","cjt/services/alertService","cjt/directives/alert","cjt/directives/alertList","cjt/directives/callout","app/services/emailAccountsService","jquery-chosen","angular-chosen"],function(e){"use strict";return function(){e.module("cpanel.emailAccounts",["ngRoute","ui.bootstrap","cjt2.cpanel","cjt2.services.api","cpanel.emailAccounts.service","localytics.directives","cjt2.directives.bytesInput"]);var t=require(["cjt/bootstrap","cjt/util/locale","cjt/directives/breadcrumbs","app/services/emailAccountsService","app/filters/encodeURIComponent","app/views/list","app/views/create","app/views/manage","app/views/manageDefault"],function(t,s){var i=e.module("cpanel.emailAccounts");i.value("PAGE",PAGE),i.constant("ONE_MEBIBYTE",1048576),i.firstLoad=!0,i.config(["$routeProvider",function(e){e.when("/list/:account?",{controller:"ListController",controllerAs:"emailAccounts",templateUrl:"views/list.ptt",breadcrumb:{id:"list",name:s.maketext("List Email Accounts"),path:"/list"}}),e.when("/create/:domain?",{controller:"CreateController",controllerAs:"emailAccount",templateUrl:"views/create.ptt",breadcrumb:{id:"create",name:s.maketext("Create an Email Account"),path:"/create/",parentID:"list"}}),e.when("/manage/:emailAccount/:scrollTo?",{controller:"ManageController",controllerAs:"emailAccount",templateUrl:"views/manage.ptt",breadcrumb:{id:"manage",name:s.maketext("Manage an Email Account"),path:"/manage/",parentID:"list"}}),e.when("/manageDefault/",{controller:"ManageDefaultController",controllerAs:"emailAccount",templateUrl:"views/manageDefault.ptt",breadcrumb:{id:"manageDefault",name:s.maketext("Manage Default Email Account"),path:"/manageDefault/",parentID:"list"}}),e.otherwise({redirectTo:"/list"})}]),t("#content","cpanel.emailAccounts")});return t}});