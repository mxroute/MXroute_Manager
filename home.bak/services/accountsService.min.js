define(["angular","cjt/io/api","cjt/io/uapi-request","cjt/io/uapi"],function(angular,API,APIREQUEST,APIDRIVER){var app=angular.module("App");app.factory("accountsService",["$q",function($q){return{getAvailableAccounts:function(isRTL){var deferred=$q.defer();var apiCall=new APIREQUEST.Class;apiCall.initialize("Resellers","list_accounts");API.promise(apiCall.getRunArguments()).done(function(response){response=response.parsedResponse;if(response.status){isRTL=isRTL||false;var currentAccount;for(var i=0,length=response.data.length;i<length;i++){currentAccount=response.data[i];if(isRTL){currentAccount.accountLabel="â€Ž("+currentAccount.domain+") "+currentAccount.user}else{currentAccount.accountLabel=currentAccount.user+" ("+currentAccount.domain+")"}}deferred.resolve(response.data)}else{deferred.reject(response.error)}});return deferred.promise}}}])});