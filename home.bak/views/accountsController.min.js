define(["angular","lodash","jquery","app/services/accountsService","cjt/decorators/growlDecorator","jquery-chosen","angular-chosen"],function(angular,_){var app=angular.module("App");var controller=app.controller("accountsController",["$scope","$window","accountsService","growl","$timeout",function($scope,$window,accountsService,growl,$timeout){$scope.isRTL=PAGE.isRTL||false;$scope.updated=true;$timeout(function(){accountsService.getAvailableAccounts($scope.isRTL).then(function(response){if(response&&response.length>=1){$scope.accounts=response;if(PAGE.userName){$scope.selectedAccount=_.find(response,["user",PAGE.userName])}}},function(error){growl.error(error)}).finally(function(){$scope.updated=true})});$scope.accountChanged=function(){if($scope.selectedAccount&&PAGE&&PAGE.securityToken){$window.location.href=PAGE.securityToken+"/xfercpanel/"+$scope.selectedAccount.user}}}]);return controller});