define(["angular","lodash","cjt/core"],function(angular,_,CJT){"use strict";var module=angular.module("cpanel.domains.docroot.directive",[]);module.value("PAGE",PAGE);module.directive("docroot",function itemListerItem(){var TEMPLATE_PATH="directives/docrootDirective.ptt";var RELATIVE_PATH="domains/"+TEMPLATE_PATH;return{templateUrl:CJT.config.debug?CJT.buildFullPath(RELATIVE_PATH):TEMPLATE_PATH,restrict:"E",scope:{parentID:"@id",rawDocroot:"@docroot",homedir:"@"},controller:["$scope","PAGE",function($scope,PAGE){function updateDocroot(newFullDocroot){$scope.fullDocroot=encodeURIComponent(newFullDocroot);var regexp=new RegExp("^"+_.escapeRegExp($scope.homedir)+"/?");$scope.docroot=newFullDocroot.replace(regexp,"");$scope.docroot=$scope.docroot==="/"?"":$scope.docroot;return $scope.docroot}var appIscPanel=PAGE.APP_NAME==="cpanel";$scope.fileManager=false;if(appIscPanel&&PAGE.fileManagerAppObj){$scope.fileManager={url:PAGE.fileManagerAppObj.url,target:PAGE.fileManagerAppObj.target||"_blank"}}$scope.$watch("rawDocroot",updateDocroot);updateDocroot($scope.rawDocroot)}]}})});